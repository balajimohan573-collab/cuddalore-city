{% extends 'main/base.html' %}
{% block content %}
<h2>Pinned Reports</h2>
<div id="complaints-container"></div>

<script>
function fetchReports() {
    fetch("/complaints/json/")
    .then(response => response.json())
    .then(data => {
        const container = document.getElementById("complaints-container");
        container.innerHTML = "";
        data.forEach(c => {
            const div = document.createElement("div");
            div.style.border = c.pinned ? "2px solid gold" : "2px solid gray";
            div.style.padding = "10px";
            div.style.marginBottom = "10px";
            div.innerHTML = `<h3>${c.title}</h3>
                             <p>${c.description}</p>
                             <p>Category: ${c.category}</p>
                             <small>${c.timestamp}</small>`;
            container.appendChild(div);
        });
    });
}
setInterval(fetchReports, 5000); // every 5 sec
fetchReports(); // initial fetch
</script>
{% endblock %}
